{"remainingRequest":"D:\\JayResp\\vuevhr\\node_modules\\babel-loader\\lib\\index.js!D:\\JayResp\\vuevhr\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\JayResp\\vuevhr\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JayResp\\vuevhr\\src\\components\\sys\\basic\\DepMana.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JayResp\\vuevhr\\src\\components\\sys\\basic\\DepMana.vue","mtime":1582276806157},{"path":"D:\\JayResp\\vuevhr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JayResp\\vuevhr\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\JayResp\\vuevhr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JayResp\\vuevhr\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEZXBNYW5hIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmlsdGVyVGV4dDogJycsCiAgICAgIGRlcHM6IFtdLAogICAgICBkZWZhdWx0UHJvcHM6IHsKICAgICAgICBjaGlsZHJlbjogJ2NoaWxkcmVuJywKICAgICAgICBsYWJlbDogJ25hbWUnCiAgICAgIH0sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBkZXA6IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICBwYXJlbnRJZDogLTEKICAgICAgfSwKICAgICAgcG5hbWU6ICcnIC8v54i26aG555qE5ZCN5a2XCgogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXREZXBzKCk7CiAgfSwKICB3YXRjaDogewogICAgLy93YXRjaOaYr+ebkeaOp+WZqAogICAgZmlsdGVyVGV4dDogZnVuY3Rpb24gZmlsdGVyVGV4dCh2YWwpIHsKICAgICAgLy/or6Xmlrnms5XmhI/mgJ3lsLHmmK/mkJzntKLmoYbkuK3mnInlgLzlj5jljJbml7bvvIzlsLHkvJrop6blj5Hov5nkuKrmlrnms5XvvIx2YWzlsLHmmK/mkJzntKLmoYbph4zpnaLnmoTmnIDmlrDlgLwKICAgICAgLy/nu5PlkIjkuIDotbfnnIvnmoTmhI/mgJ3lsLHmmK/nm5HmjqfmkJzntKLmoYbph4zpnaLmnInmsqHmnInlgLzlj5HnlJ/lj5jljJbvvIzmnInnmoTor53lsLHop6blj5Hor6Xmlrnms5UKICAgICAgdGhpcy4kcmVmcy50cmVlLmZpbHRlcih2YWwpOyAvL+i/memHjOeahGZpbHRlcuaMh+eahOWwseaYrzpmaWx0ZXItbm9kZS1tZXRob2Q9ImZpbHRlck5vZGUi6L+Z5Liq5pa55rOV77yM5Lyg55qE5Y+C5pWw5pivdmFsCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBkb0FkZERlcDogZnVuY3Rpb24gZG9BZGREZXAoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLnBvc3RSZXF1ZXN0KCIvc3lzdGVtL2Jhc2ljL2RlcGFydG1lbnQvIiwgdGhpcy5kZXApLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBpZiAocmVzcCkgewogICAgICAgICAgX3RoaXMuZGVwID0gewogICAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgICAgcGFyZW50SWQ6IC0xCiAgICAgICAgICB9OwogICAgICAgICAgX3RoaXMucG5hbWUgPSAnJzsKCiAgICAgICAgICBfdGhpcy5pbml0RGVwcygpOwoKICAgICAgICAgIF90aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNob3dBZGREZXA6IGZ1bmN0aW9uIHNob3dBZGREZXAoZGF0YSkgewogICAgICAvLyBhbGVydChKU09OLnN0cmluZ2lmeShkYXRhKSk7CiAgICAgIHRoaXMucG5hbWUgPSBkYXRhLm5hbWU7CiAgICAgIHRoaXMuZGVwLnBhcmVudElkID0gZGF0YS5pZDsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBkZWxldGVEZXA6IGZ1bmN0aW9uIGRlbGV0ZURlcChkYXRhKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgLy9hbGVydChKU09OLnN0cmluZ2lmeShkYXRhKSk7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOOAkCcgKyBkYXRhLm5hbWUgKyAn44CR6KeS6ImyLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5kZWxldGVSZXF1ZXN0KCIvc3lzdGVtL2Jhc2ljL2RlcGFydG1lbnQvIiArIGRhdGEuaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgIGlmIChyZXNwKSB7CiAgICAgICAgICAgIF90aGlzMi5pbml0RGVwcygpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGluaXREZXBzOiBmdW5jdGlvbiBpbml0RGVwcygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLmdldFJlcXVlc3QoIi9zeXN0ZW0vYmFzaWMvZGVwYXJ0bWVudC8iKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgaWYgKHJlc3ApIHsKICAgICAgICAgIF90aGlzMy5kZXBzID0gcmVzcDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGZpbHRlck5vZGU6IGZ1bmN0aW9uIGZpbHRlck5vZGUodmFsdWUsIGRhdGEpIHsKICAgICAgLy92YWx1ZeWwseaYr+S4iuaWh+aJgOivtOeahOS8oOi/h+adpeeahHZhbO+8jOmCo+S5iGRhdGHlsLHmmK/ku5bnmoTlrZDpobkKICAgICAgLy/ku6Xov5nph4zkuLrkvovvvIzoi6V2YWx1ZeaYr+iCoeS4nOS8mu+8jOmCo+S5iGRhdGHlsLHmmK/okaPkuovkvJrvvIxiYmLvvJvoi6V2YWx1ZeaYr+iRo+S6i+S8mu+8jOmCo+S5iGRhdGHlsLHmmK/mgLvlip4KICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIHRydWU7IC8v5b2TdmFsdWXkuLrnqbrnmoTml7blgJnvvIzov5Tlm550cnVl77yb5b2T6L+U5ZuedHJ1ZeaXtu+8jOmCo+S5iGRhdGHlsLHnlZnnnYDvvIzlkKbliJnljrvpmaRkYXRhCgogICAgICByZXR1cm4gZGF0YS5uYW1lLmluZGV4T2YodmFsdWUpICE9PSAtMTsgLy/ov5nph4znmoRuYW1l5bCx5piv5LiK5paH5LitZGVmYXVsdFByb3Bz5Lit55qEbGFiZWwKICAgICAgLy9pbmRleE9mKHZhbHVlKeihqOekuuaYr+WQpuWMheWQq3ZhbHVl77ybZGF0YS5uYW1lLmluZGV4T2YodmFsdWUpICE9PSAtMeaEj+aAneWwseaYr2RhdGHljIXlkKvkuoZ2YWx1ZeWAvO+8jOi/lOWbnnRydWUKICAgIH0KICB9Cn07"},{"version":3,"sources":["DepMana.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA,EAFA;AAGA,MAAA,YAAA,EAAA;AACA,QAAA,QAAA,EAAA,UADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAHA;AAOA,MAAA,aAAA,EAAA,KAPA;AAQA,MAAA,GAAA,EAAA;AACA,QAAA,IAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA,CAAA;AAFA,OARA;AAYA,MAAA,KAAA,EAAA,EAZA,CAYA;;AAZA,KAAA;AAcA,GAjBA;AAkBA,EAAA,OAlBA,qBAkBA;AACA,SAAA,QAAA;AACA,GApBA;AAqBA,EAAA,KAAA,EAAA;AAAA;AACA,IAAA,UADA,sBACA,GADA,EACA;AACA;AACA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,MAAA,CAAA,GAAA,EAHA,CAIA;AACA;AANA,GArBA;AA6BA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,WAAA,WAAA,CAAA,2BAAA,EAAA,KAAA,GAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,UAAA,KAAA,CAAA,GAAA,GAAA;AACA,YAAA,IAAA,EAAA,EADA;AAEA,YAAA,QAAA,EAAA,CAAA;AAFA,WAAA;AAIA,UAAA,KAAA,CAAA,KAAA,GAAA,EAAA;;AACA,UAAA,KAAA,CAAA,QAAA;;AACA,UAAA,KAAA,CAAA,aAAA,GAAA,KAAA;AACA;AACA,OAVA;AAWA,KAbA;AAcA,IAAA,UAdA,sBAcA,IAdA,EAcA;AACA;AACA,WAAA,KAAA,GAAA,IAAA,CAAA,IAAA;AACA,WAAA,GAAA,CAAA,QAAA,GAAA,IAAA,CAAA,EAAA;AACA,WAAA,aAAA,GAAA,IAAA;AACA,KAnBA;AAoBA,IAAA,SApBA,qBAoBA,IApBA,EAoBA;AAAA;;AACA;AACA,WAAA,QAAA,CAAA,cAAA,IAAA,CAAA,IAAA,GAAA,YAAA,EAAA,IAAA,EAAA;AACA,QAAA,iBAAA,EAAA,IADA;AAEA,QAAA,gBAAA,EAAA,IAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OAAA,EAIA,IAJA,CAIA,YAAA;AACA,QAAA,MAAA,CAAA,aAAA,CAAA,8BAAA,IAAA,CAAA,EAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,EAAA;AACA,YAAA,MAAA,CAAA,QAAA;AACA;AACA,SAJA;AAKA,OAVA,EAUA,KAVA,CAUA,YAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA;AACA,UAAA,IAAA,EAAA,MADA;AAEA,UAAA,OAAA,EAAA;AAFA,SAAA;AAIA,OAfA;AAgBA,KAtCA;AAuCA,IAAA,QAvCA,sBAuCA;AAAA;;AACA,WAAA,UAAA,CAAA,2BAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,IAAA,GAAA,IAAA;AACA;AACA,OAJA;AAKA,KA7CA;AA8CA,IAAA,UA9CA,sBA8CA,KA9CA,EA8CA,IA9CA,EA8CA;AACA;AACA;AACA,UAAA,CAAA,KAAA,EAAA,OAAA,IAAA,CAHA,CAIA;;AACA,aAAA,IAAA,CAAA,IAAA,CAAA,OAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CALA,CAKA;AACA;AACA;AArDA;AA7BA,CAAA","sourcesContent":["<template>\r\n    <div style=\"width: 500px\">\r\n        <el-input\r\n                placeholder=\"请输入部门名称进行搜索...\"\r\n                v-model=\"filterText\"\r\n                prefix-icon=\"el-icon-search\">\r\n        </el-input>\r\n\r\n        <el-tree\r\n                :data=\"deps\"\r\n                :props=\"defaultProps\"\r\n                :filter-node-method=\"filterNode\"\r\n                :expand-on-click-node=\"false\"\r\n                ref=\"tree\">\r\n           <span class=\"custom-tree-node\" slot-scope=\"{ node, data }\"\r\n                 style=\"display: flex;justify-content: space-between;width:100%\">\r\n                  <!--node值的是当前元素，data就是该元素的数据-->\r\n        <span>{{ node.label }}</span>  <!--{{ node.label }}与{{data.name}}是一样的-->\r\n        <span>\r\n          <el-button\r\n                  type=\"primary\"\r\n                  size=\"mini\"\r\n                  style=\"padding: 2px\"\r\n                  @click=\"() => showAddDep(data)\">\r\n            添加部门\r\n          </el-button>\r\n          <el-button\r\n                  type=\"danger\"\r\n                  size=\"mini\"\r\n                  style=\"padding: 2px\"\r\n                  @click=\"() => deleteDep(data)\">\r\n            删除部门\r\n          </el-button>\r\n        </span>\r\n      </span>\r\n        </el-tree>\r\n        <!--   增加部门时候的弹框     -->\r\n        <el-dialog\r\n                title=\"添加部门\"\r\n                :visible.sync=\"dialogVisible\"\r\n                width=\"30%\"\r\n                :before-close=\"handleClose\">\r\n            <div>\r\n                <table>\r\n                    <tr>\r\n                        <td><el-tag>上级部门</el-tag></td>\r\n                        <td><span>{{pname}}</span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td><el-tag>部门名称</el-tag></td>\r\n                        <td><el-input v-model=\"dep.name\" placeholder=\"请输入部门名称...\" ></el-input></td>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n    <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n    <el-button type=\"primary\" @click=\"doAddDep\">确 定</el-button>\r\n  </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"DepMana\",\r\n        data(){\r\n            return {\r\n                filterText:'',\r\n                deps:[],\r\n                defaultProps: {\r\n                    children: 'children',\r\n                    label: 'name'\r\n                },\r\n                dialogVisible:false,\r\n                dep:{\r\n                    name:'',\r\n                    parentId:-1\r\n                },\r\n                pname:''  //父项的名字\r\n            }\r\n        },\r\n        mounted() {\r\n           this.initDeps();\r\n        },\r\n        watch:{ //watch是监控器\r\n            filterText(val) {\r\n            //该方法意思就是搜索框中有值变化时，就会触发这个方法，val就是搜索框里面的最新值\r\n            //结合一起看的意思就是监控搜索框里面有没有值发生变化，有的话就触发该方法\r\n                this.$refs.tree.filter(val);\r\n            //这里的filter指的就是:filter-node-method=\"filterNode\"这个方法，传的参数是val\r\n            }\r\n        },\r\n        methods:{\r\n            doAddDep(){\r\n                this.postRequest(\"/system/basic/department/\",this.dep).then(resp=>{\r\n                    if (resp){\r\n                        this.dep={\r\n                            name:'',\r\n                            parentId:-1\r\n                        };\r\n                        this.pname='' ;\r\n                        this.initDeps();\r\n                        this.dialogVisible=false;\r\n                    }\r\n                })\r\n            },\r\n            showAddDep(data){\r\n              // alert(JSON.stringify(data));\r\n              this.pname = data.name;\r\n              this.dep.parentId = data.id;\r\n              this.dialogVisible=true;\r\n            },\r\n            deleteDep(data){\r\n                //alert(JSON.stringify(data));\r\n                    this.$confirm('此操作将永久删除【'+data.name+'】角色, 是否继续?', '提示', {\r\n                        confirmButtonText: '确定',\r\n                        cancelButtonText: '取消',\r\n                        type: 'warning'\r\n                    }).then(() => {\r\n                        this.deleteRequest(\"/system/basic/department/\"+data.id).then(resp=>{\r\n                            if (resp){\r\n                                this.initDeps();\r\n                            }\r\n                        })\r\n                    }).catch(() => {\r\n                        this.$message({\r\n                            type: 'info',\r\n                            message: '已取消删除'\r\n                        });\r\n                    });\r\n            },\r\n            initDeps(){\r\n             this.getRequest(\"/system/basic/department/\").then(resp=>{\r\n                 if (resp){\r\n                     this.deps = resp ;\r\n                 }\r\n             })\r\n            },\r\n            filterNode(value, data) {\r\n                //value就是上文所说的传过来的val，那么data就是他的子项\r\n                //以这里为例，若value是股东会，那么data就是董事会，bbb；若value是董事会，那么data就是总办\r\n                if (!value) return true;\r\n                //当value为空的时候，返回true；当返回true时，那么data就留着，否则去除data\r\n                return data.name.indexOf(value) !== -1; //这里的name就是上文中defaultProps中的label\r\n                //indexOf(value)表示是否包含value；data.name.indexOf(value) !== -1意思就是data包含了value值，返回true\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"sourceRoot":"src/components/sys/basic"}]}