{"remainingRequest":"D:\\JayResp\\vuevhr\\node_modules\\babel-loader\\lib\\index.js!D:\\JayResp\\vuevhr\\src\\utils\\stomp.js","dependencies":[{"path":"D:\\JayResp\\vuevhr\\src\\utils\\stomp.js","mtime":1582699809789},{"path":"D:\\JayResp\\vuevhr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JayResp\\vuevhr\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLmNvbnN0cnVjdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLnNsaWNlIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5jb25zdHJ1Y3RvciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNlYXJjaCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnVpbnQ4LWFycmF5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuY29weS13aXRoaW4iKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5ldmVyeSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbGwiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWx0ZXIiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1pbmRleCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZvci1lYWNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5jbHVkZXMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmRleC1vZiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lml0ZXJhdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuam9pbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lmxhc3QtaW5kZXgtb2YiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5tYXAiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UtcmlnaHQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZXZlcnNlIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2V0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2xpY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb21lIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29ydCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnN1YmFycmF5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tbG9jYWxlLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLXN0cmluZyIpOwoKLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMQoKLyoNCiBTdG9tcCBPdmVyIFdlYlNvY2tldCBodHRwOi8vd3d3LmptZXNuaWwubmV0L3N0b21wLXdlYnNvY2tldC9kb2MvIHwgQXBhY2hlIExpY2Vuc2UgVjIuMA0KDQogQ29weXJpZ2h0IChDKSAyMDEwLTIwMTMgW0plZmYgTWVzbmlsXShodHRwOi8vam1lc25pbC5uZXQvKQ0KIENvcHlyaWdodCAoQykgMjAxMiBbRnVzZVNvdXJjZSwgSW5jLl0oaHR0cDovL2Z1c2Vzb3VyY2UuY29tKQ0KICovCihmdW5jdGlvbiAoKSB7CiAgdmFyIEJ5dGUsCiAgICAgIENsaWVudCwKICAgICAgRnJhbWUsCiAgICAgIFN0b21wLAogICAgICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICAgICAgX19zbGljZSA9IFtdLnNsaWNlOwogIEJ5dGUgPSB7CiAgICBMRjogJ1x4MEEnLAogICAgTlVMTDogJ1x4MDAnCiAgfTsKCiAgRnJhbWUgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdW5tYXJzaGFsbFNpbmdsZTsKCiAgICBmdW5jdGlvbiBGcmFtZShjb21tYW5kLCBoZWFkZXJzLCBib2R5KSB7CiAgICAgIHRoaXMuY29tbWFuZCA9IGNvbW1hbmQ7CiAgICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnMgIT0gbnVsbCA/IGhlYWRlcnMgOiB7fTsKICAgICAgdGhpcy5ib2R5ID0gYm9keSAhPSBudWxsID8gYm9keSA6ICcnOwogICAgfQoKICAgIEZyYW1lLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGxpbmVzLCBuYW1lLCBza2lwQ29udGVudExlbmd0aCwgdmFsdWUsIF9yZWY7CgogICAgICBsaW5lcyA9IFt0aGlzLmNvbW1hbmRdOwogICAgICBza2lwQ29udGVudExlbmd0aCA9IHRoaXMuaGVhZGVyc1snY29udGVudC1sZW5ndGgnXSA9PT0gZmFsc2UgPyB0cnVlIDogZmFsc2U7CgogICAgICBpZiAoc2tpcENvbnRlbnRMZW5ndGgpIHsKICAgICAgICBkZWxldGUgdGhpcy5oZWFkZXJzWydjb250ZW50LWxlbmd0aCddOwogICAgICB9CgogICAgICBfcmVmID0gdGhpcy5oZWFkZXJzOwoKICAgICAgZm9yIChuYW1lIGluIF9yZWYpIHsKICAgICAgICBpZiAoIV9faGFzUHJvcC5jYWxsKF9yZWYsIG5hbWUpKSBjb250aW51ZTsKICAgICAgICB2YWx1ZSA9IF9yZWZbbmFtZV07CiAgICAgICAgbGluZXMucHVzaCgiIiArIG5hbWUgKyAiOiIgKyB2YWx1ZSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmJvZHkgJiYgIXNraXBDb250ZW50TGVuZ3RoKSB7CiAgICAgICAgbGluZXMucHVzaCgiY29udGVudC1sZW5ndGg6IiArIEZyYW1lLnNpemVPZlVURjgodGhpcy5ib2R5KSk7CiAgICAgIH0KCiAgICAgIGxpbmVzLnB1c2goQnl0ZS5MRiArIHRoaXMuYm9keSk7CiAgICAgIHJldHVybiBsaW5lcy5qb2luKEJ5dGUuTEYpOwogICAgfTsKCiAgICBGcmFtZS5zaXplT2ZVVEY4ID0gZnVuY3Rpb24gKHMpIHsKICAgICAgaWYgKHMpIHsKICAgICAgICByZXR1cm4gZW5jb2RlVVJJKHMpLm1hdGNoKC8lLi58Li9nKS5sZW5ndGg7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0KICAgIH07CgogICAgdW5tYXJzaGFsbFNpbmdsZSA9IGZ1bmN0aW9uIHVubWFyc2hhbGxTaW5nbGUoZGF0YSkgewogICAgICB2YXIgYm9keSwgY2hyLCBjb21tYW5kLCBkaXZpZGVyLCBoZWFkZXJMaW5lcywgaGVhZGVycywgaSwgaWR4LCBsZW4sIGxpbmUsIHN0YXJ0LCB0cmltLCBfaSwgX2osIF9sZW4sIF9yZWYsIF9yZWYxOwoKICAgICAgZGl2aWRlciA9IGRhdGEuc2VhcmNoKFJlZ0V4cCgiIiArIEJ5dGUuTEYgKyBCeXRlLkxGKSk7CiAgICAgIGhlYWRlckxpbmVzID0gZGF0YS5zdWJzdHJpbmcoMCwgZGl2aWRlcikuc3BsaXQoQnl0ZS5MRik7CiAgICAgIGNvbW1hbmQgPSBoZWFkZXJMaW5lcy5zaGlmdCgpOwogICAgICBoZWFkZXJzID0ge307CgogICAgICB0cmltID0gZnVuY3Rpb24gdHJpbShzdHIpIHsKICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL15ccyt8XHMrJC9nLCAnJyk7CiAgICAgIH07CgogICAgICBfcmVmID0gaGVhZGVyTGluZXMucmV2ZXJzZSgpOwoKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgbGluZSA9IF9yZWZbX2ldOwogICAgICAgIGlkeCA9IGxpbmUuaW5kZXhPZignOicpOwogICAgICAgIGhlYWRlcnNbdHJpbShsaW5lLnN1YnN0cmluZygwLCBpZHgpKV0gPSB0cmltKGxpbmUuc3Vic3RyaW5nKGlkeCArIDEpKTsKICAgICAgfQoKICAgICAgYm9keSA9ICcnOwogICAgICBzdGFydCA9IGRpdmlkZXIgKyAyOwoKICAgICAgaWYgKGhlYWRlcnNbJ2NvbnRlbnQtbGVuZ3RoJ10pIHsKICAgICAgICBsZW4gPSBwYXJzZUludChoZWFkZXJzWydjb250ZW50LWxlbmd0aCddKTsKICAgICAgICBib2R5ID0gKCcnICsgZGF0YSkuc3Vic3RyaW5nKHN0YXJ0LCBzdGFydCArIGxlbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2hyID0gbnVsbDsKCiAgICAgICAgZm9yIChpID0gX2ogPSBzdGFydCwgX3JlZjEgPSBkYXRhLmxlbmd0aDsgc3RhcnQgPD0gX3JlZjEgPyBfaiA8IF9yZWYxIDogX2ogPiBfcmVmMTsgaSA9IHN0YXJ0IDw9IF9yZWYxID8gKytfaiA6IC0tX2opIHsKICAgICAgICAgIGNociA9IGRhdGEuY2hhckF0KGkpOwoKICAgICAgICAgIGlmIChjaHIgPT09IEJ5dGUuTlVMTCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBib2R5ICs9IGNocjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgRnJhbWUoY29tbWFuZCwgaGVhZGVycywgYm9keSk7CiAgICB9OwoKICAgIEZyYW1lLnVubWFyc2hhbGwgPSBmdW5jdGlvbiAoZGF0YXMpIHsKICAgICAgdmFyIGZyYW1lLCBmcmFtZXMsIGxhc3RfZnJhbWUsIHI7CiAgICAgIGZyYW1lcyA9IGRhdGFzLnNwbGl0KFJlZ0V4cCgiIiArIEJ5dGUuTlVMTCArIEJ5dGUuTEYgKyAiKiIpKTsKICAgICAgciA9IHsKICAgICAgICBmcmFtZXM6IFtdLAogICAgICAgIHBhcnRpYWw6ICcnCiAgICAgIH07CgogICAgICByLmZyYW1lcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzOwoKICAgICAgICBfcmVmID0gZnJhbWVzLnNsaWNlKDAsIC0xKTsKICAgICAgICBfcmVzdWx0cyA9IFtdOwoKICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICAgIGZyYW1lID0gX3JlZltfaV07CgogICAgICAgICAgX3Jlc3VsdHMucHVzaCh1bm1hcnNoYWxsU2luZ2xlKGZyYW1lKSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gX3Jlc3VsdHM7CiAgICAgIH0oKTsKCiAgICAgIGxhc3RfZnJhbWUgPSBmcmFtZXMuc2xpY2UoLTEpWzBdOwoKICAgICAgaWYgKGxhc3RfZnJhbWUgPT09IEJ5dGUuTEYgfHwgbGFzdF9mcmFtZS5zZWFyY2goUmVnRXhwKCIiICsgQnl0ZS5OVUxMICsgQnl0ZS5MRiArICIqJCIpKSAhPT0gLTEpIHsKICAgICAgICByLmZyYW1lcy5wdXNoKHVubWFyc2hhbGxTaW5nbGUobGFzdF9mcmFtZSkpOwogICAgICB9IGVsc2UgewogICAgICAgIHIucGFydGlhbCA9IGxhc3RfZnJhbWU7CiAgICAgIH0KCiAgICAgIHJldHVybiByOwogICAgfTsKCiAgICBGcmFtZS5tYXJzaGFsbCA9IGZ1bmN0aW9uIChjb21tYW5kLCBoZWFkZXJzLCBib2R5KSB7CiAgICAgIHZhciBmcmFtZTsKICAgICAgZnJhbWUgPSBuZXcgRnJhbWUoY29tbWFuZCwgaGVhZGVycywgYm9keSk7CiAgICAgIHJldHVybiBmcmFtZS50b1N0cmluZygpICsgQnl0ZS5OVUxMOwogICAgfTsKCiAgICByZXR1cm4gRnJhbWU7CiAgfSgpOwoKICBDbGllbnQgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgbm93OwoKICAgIGZ1bmN0aW9uIENsaWVudCh3cykgewogICAgICB0aGlzLndzID0gd3M7CiAgICAgIHRoaXMud3MuYmluYXJ5VHlwZSA9ICJhcnJheWJ1ZmZlciI7CiAgICAgIHRoaXMuY291bnRlciA9IDA7CiAgICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7CiAgICAgIHRoaXMuaGVhcnRiZWF0ID0gewogICAgICAgIG91dGdvaW5nOiAxMDAwMCwKICAgICAgICBpbmNvbWluZzogMTAwMDAKICAgICAgfTsKICAgICAgdGhpcy5tYXhXZWJTb2NrZXRGcmFtZVNpemUgPSAxNiAqIDEwMjQ7CiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IHt9OwogICAgICB0aGlzLnBhcnRpYWxEYXRhID0gJyc7CiAgICB9CgogICAgQ2xpZW50LnByb3RvdHlwZS5kZWJ1ZyA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICAgIHZhciBfcmVmOwoKICAgICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiICYmIHdpbmRvdyAhPT0gbnVsbCA/IChfcmVmID0gd2luZG93LmNvbnNvbGUpICE9IG51bGwgPyBfcmVmLmxvZyhtZXNzYWdlKSA6IHZvaWQgMCA6IHZvaWQgMDsKICAgIH07CgogICAgbm93ID0gZnVuY3Rpb24gbm93KCkgewogICAgICBpZiAoRGF0ZS5ub3cpIHsKICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IERhdGUoKS52YWx1ZU9mOwogICAgICB9CiAgICB9OwoKICAgIENsaWVudC5wcm90b3R5cGUuX3RyYW5zbWl0ID0gZnVuY3Rpb24gKGNvbW1hbmQsIGhlYWRlcnMsIGJvZHkpIHsKICAgICAgdmFyIG91dDsKICAgICAgb3V0ID0gRnJhbWUubWFyc2hhbGwoY29tbWFuZCwgaGVhZGVycywgYm9keSk7CgogICAgICBpZiAodHlwZW9mIHRoaXMuZGVidWcgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICB0aGlzLmRlYnVnKCI+Pj4gIiArIG91dCk7CiAgICAgIH0KCiAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgaWYgKG91dC5sZW5ndGggPiB0aGlzLm1heFdlYlNvY2tldEZyYW1lU2l6ZSkgewogICAgICAgICAgdGhpcy53cy5zZW5kKG91dC5zdWJzdHJpbmcoMCwgdGhpcy5tYXhXZWJTb2NrZXRGcmFtZVNpemUpKTsKICAgICAgICAgIG91dCA9IG91dC5zdWJzdHJpbmcodGhpcy5tYXhXZWJTb2NrZXRGcmFtZVNpemUpOwoKICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5kZWJ1ZyA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICB0aGlzLmRlYnVnKCJyZW1haW5pbmcgPSAiICsgb3V0Lmxlbmd0aCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB0aGlzLndzLnNlbmQob3V0KTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgQ2xpZW50LnByb3RvdHlwZS5fc2V0dXBIZWFydGJlYXQgPSBmdW5jdGlvbiAoaGVhZGVycykgewogICAgICB2YXIgc2VydmVySW5jb21pbmcsIHNlcnZlck91dGdvaW5nLCB0dGwsIHYsIF9yZWYsIF9yZWYxOwoKICAgICAgaWYgKChfcmVmID0gaGVhZGVycy52ZXJzaW9uKSAhPT0gU3RvbXAuVkVSU0lPTlMuVjFfMSAmJiBfcmVmICE9PSBTdG9tcC5WRVJTSU9OUy5WMV8yKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBfcmVmMSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2ksIF9sZW4sIF9yZWYxLCBfcmVzdWx0czsKCiAgICAgICAgX3JlZjEgPSBoZWFkZXJzWydoZWFydC1iZWF0J10uc3BsaXQoIiwiKTsKICAgICAgICBfcmVzdWx0cyA9IFtdOwoKICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYxLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgICB2ID0gX3JlZjFbX2ldOwoKICAgICAgICAgIF9yZXN1bHRzLnB1c2gocGFyc2VJbnQodikpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIF9yZXN1bHRzOwogICAgICB9KCksIHNlcnZlck91dGdvaW5nID0gX3JlZjFbMF0sIHNlcnZlckluY29taW5nID0gX3JlZjFbMV07CgogICAgICBpZiAoISh0aGlzLmhlYXJ0YmVhdC5vdXRnb2luZyA9PT0gMCB8fCBzZXJ2ZXJJbmNvbWluZyA9PT0gMCkpIHsKICAgICAgICB0dGwgPSBNYXRoLm1heCh0aGlzLmhlYXJ0YmVhdC5vdXRnb2luZywgc2VydmVySW5jb21pbmcpOwoKICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGVidWcgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgIHRoaXMuZGVidWcoInNlbmQgUElORyBldmVyeSAiICsgdHRsICsgIm1zIik7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnBpbmdlciA9IFN0b21wLnNldEludGVydmFsKHR0bCwgZnVuY3Rpb24gKF90aGlzKSB7CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy53cy5zZW5kKEJ5dGUuTEYpOwoKICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBfdGhpcy5kZWJ1ZyA9PT0gImZ1bmN0aW9uIiA/IF90aGlzLmRlYnVnKCI+Pj4gUElORyIpIDogdm9pZCAwOwogICAgICAgICAgfTsKICAgICAgICB9KHRoaXMpKTsKICAgICAgfQoKICAgICAgaWYgKCEodGhpcy5oZWFydGJlYXQuaW5jb21pbmcgPT09IDAgfHwgc2VydmVyT3V0Z29pbmcgPT09IDApKSB7CiAgICAgICAgdHRsID0gTWF0aC5tYXgodGhpcy5oZWFydGJlYXQuaW5jb21pbmcsIHNlcnZlck91dGdvaW5nKTsKCiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmRlYnVnID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICB0aGlzLmRlYnVnKCJjaGVjayBQT05HIGV2ZXJ5ICIgKyB0dGwgKyAibXMiKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aGlzLnBvbmdlciA9IFN0b21wLnNldEludGVydmFsKHR0bCwgZnVuY3Rpb24gKF90aGlzKSB7CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZGVsdGE7CiAgICAgICAgICAgIGRlbHRhID0gbm93KCkgLSBfdGhpcy5zZXJ2ZXJBY3Rpdml0eTsKCiAgICAgICAgICAgIGlmIChkZWx0YSA+IHR0bCAqIDIpIHsKICAgICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLmRlYnVnID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5kZWJ1ZygiZGlkIG5vdCByZWNlaXZlIHNlcnZlciBhY3Rpdml0eSBmb3IgdGhlIGxhc3QgIiArIGRlbHRhICsgIm1zIik7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMud3MuY2xvc2UoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9KHRoaXMpKTsKICAgICAgfQogICAgfTsKCiAgICBDbGllbnQucHJvdG90eXBlLl9wYXJzZUNvbm5lY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhcmdzLCBjb25uZWN0Q2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIGhlYWRlcnM7CiAgICAgIGFyZ3MgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBfX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdOwogICAgICBoZWFkZXJzID0ge307CgogICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgaGVhZGVycyA9IGFyZ3NbMF0sIGNvbm5lY3RDYWxsYmFjayA9IGFyZ3NbMV07CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgaWYgKGFyZ3NbMV0gaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgICAgICBoZWFkZXJzID0gYXJnc1swXSwgY29ubmVjdENhbGxiYWNrID0gYXJnc1sxXSwgZXJyb3JDYWxsYmFjayA9IGFyZ3NbMl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBoZWFkZXJzLmxvZ2luID0gYXJnc1swXSwgaGVhZGVycy5wYXNzY29kZSA9IGFyZ3NbMV0sIGNvbm5lY3RDYWxsYmFjayA9IGFyZ3NbMl07CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIGhlYWRlcnMubG9naW4gPSBhcmdzWzBdLCBoZWFkZXJzLnBhc3Njb2RlID0gYXJnc1sxXSwgY29ubmVjdENhbGxiYWNrID0gYXJnc1syXSwgZXJyb3JDYWxsYmFjayA9IGFyZ3NbM107CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGhlYWRlcnMubG9naW4gPSBhcmdzWzBdLCBoZWFkZXJzLnBhc3Njb2RlID0gYXJnc1sxXSwgY29ubmVjdENhbGxiYWNrID0gYXJnc1syXSwgZXJyb3JDYWxsYmFjayA9IGFyZ3NbM10sIGhlYWRlcnMuaG9zdCA9IGFyZ3NbNF07CiAgICAgIH0KCiAgICAgIHJldHVybiBbaGVhZGVycywgY29ubmVjdENhbGxiYWNrLCBlcnJvckNhbGxiYWNrXTsKICAgIH07CgogICAgQ2xpZW50LnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgYXJncywgZXJyb3JDYWxsYmFjaywgaGVhZGVycywgb3V0OwogICAgICBhcmdzID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gX19zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTsKICAgICAgb3V0ID0gdGhpcy5fcGFyc2VDb25uZWN0LmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgICBoZWFkZXJzID0gb3V0WzBdLCB0aGlzLmNvbm5lY3RDYWxsYmFjayA9IG91dFsxXSwgZXJyb3JDYWxsYmFjayA9IG91dFsyXTsKCiAgICAgIGlmICh0eXBlb2YgdGhpcy5kZWJ1ZyA9PT0gImZ1bmN0aW9uIikgewogICAgICAgIHRoaXMuZGVidWcoIk9wZW5pbmcgV2ViIFNvY2tldC4uLiIpOwogICAgICB9CgogICAgICB0aGlzLndzLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChfdGhpcykgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgICAgICB2YXIgYXJyLCBjLCBjbGllbnQsIGRhdGEsIGZyYW1lLCBtZXNzYWdlSUQsIG9ucmVjZWl2ZSwgc3Vic2NyaXB0aW9uLCB1bm1hcnNoYWxsZWREYXRhLCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CgogICAgICAgICAgZGF0YSA9IHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgZXZ0LmRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciA/IChhcnIgPSBuZXcgVWludDhBcnJheShldnQuZGF0YSksIHR5cGVvZiBfdGhpcy5kZWJ1ZyA9PT0gImZ1bmN0aW9uIiA/IF90aGlzLmRlYnVnKCItLS0gZ290IGRhdGEgbGVuZ3RoOiAiICsgYXJyLmxlbmd0aCkgOiB2b2lkIDAsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9pLCBfbGVuLCBfcmVzdWx0czsKCiAgICAgICAgICAgIF9yZXN1bHRzID0gW107CgogICAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGFyci5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgICAgICAgIGMgPSBhcnJbX2ldOwoKICAgICAgICAgICAgICBfcmVzdWx0cy5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoYykpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7CiAgICAgICAgICB9KCkuam9pbignJykpIDogZXZ0LmRhdGE7CiAgICAgICAgICBfdGhpcy5zZXJ2ZXJBY3Rpdml0eSA9IG5vdygpOwoKICAgICAgICAgIGlmIChkYXRhID09PSBCeXRlLkxGKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMuZGVidWcgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgICBfdGhpcy5kZWJ1ZygiPDw8IFBPTkciKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMuZGVidWcgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgX3RoaXMuZGVidWcoIjw8PCAiICsgZGF0YSk7CiAgICAgICAgICB9CgogICAgICAgICAgdW5tYXJzaGFsbGVkRGF0YSA9IEZyYW1lLnVubWFyc2hhbGwoX3RoaXMucGFydGlhbERhdGEgKyBkYXRhKTsKICAgICAgICAgIF90aGlzLnBhcnRpYWxEYXRhID0gdW5tYXJzaGFsbGVkRGF0YS5wYXJ0aWFsOwogICAgICAgICAgX3JlZiA9IHVubWFyc2hhbGxlZERhdGEuZnJhbWVzOwogICAgICAgICAgX3Jlc3VsdHMgPSBbXTsKCiAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICAgICAgZnJhbWUgPSBfcmVmW19pXTsKCiAgICAgICAgICAgIHN3aXRjaCAoZnJhbWUuY29tbWFuZCkgewogICAgICAgICAgICAgIGNhc2UgIkNPTk5FQ1RFRCI6CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLmRlYnVnID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLmRlYnVnKCJjb25uZWN0ZWQgdG8gc2VydmVyICIgKyBmcmFtZS5oZWFkZXJzLnNlcnZlcik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMuY29ubmVjdGVkID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICBfdGhpcy5fc2V0dXBIZWFydGJlYXQoZnJhbWUuaGVhZGVycyk7CgogICAgICAgICAgICAgICAgX3Jlc3VsdHMucHVzaCh0eXBlb2YgX3RoaXMuY29ubmVjdENhbGxiYWNrID09PSAiZnVuY3Rpb24iID8gX3RoaXMuY29ubmVjdENhbGxiYWNrKGZyYW1lKSA6IHZvaWQgMCk7CgogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgIk1FU1NBR0UiOgogICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gZnJhbWUuaGVhZGVycy5zdWJzY3JpcHRpb247CiAgICAgICAgICAgICAgICBvbnJlY2VpdmUgPSBfdGhpcy5zdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbl0gfHwgX3RoaXMub25yZWNlaXZlOwoKICAgICAgICAgICAgICAgIGlmIChvbnJlY2VpdmUpIHsKICAgICAgICAgICAgICAgICAgY2xpZW50ID0gX3RoaXM7CiAgICAgICAgICAgICAgICAgIG1lc3NhZ2VJRCA9IGZyYW1lLmhlYWRlcnNbIm1lc3NhZ2UtaWQiXTsKCiAgICAgICAgICAgICAgICAgIGZyYW1lLmFjayA9IGZ1bmN0aW9uIChoZWFkZXJzKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlcnMgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IHt9OwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsaWVudC5hY2sobWVzc2FnZUlELCBzdWJzY3JpcHRpb24sIGhlYWRlcnMpOwogICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgZnJhbWUubmFjayA9IGZ1bmN0aW9uIChoZWFkZXJzKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlcnMgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IHt9OwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsaWVudC5uYWNrKG1lc3NhZ2VJRCwgc3Vic2NyaXB0aW9uLCBoZWFkZXJzKTsKICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgIF9yZXN1bHRzLnB1c2gob25yZWNlaXZlKGZyYW1lKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfcmVzdWx0cy5wdXNoKHR5cGVvZiBfdGhpcy5kZWJ1ZyA9PT0gImZ1bmN0aW9uIiA/IF90aGlzLmRlYnVnKCJVbmhhbmRsZWQgcmVjZWl2ZWQgTUVTU0FHRTogIiArIGZyYW1lKSA6IHZvaWQgMCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgIlJFQ0VJUFQiOgogICAgICAgICAgICAgICAgX3Jlc3VsdHMucHVzaCh0eXBlb2YgX3RoaXMub25yZWNlaXB0ID09PSAiZnVuY3Rpb24iID8gX3RoaXMub25yZWNlaXB0KGZyYW1lKSA6IHZvaWQgMCk7CgogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgIkVSUk9SIjoKICAgICAgICAgICAgICAgIF9yZXN1bHRzLnB1c2godHlwZW9mIGVycm9yQ2FsbGJhY2sgPT09ICJmdW5jdGlvbiIgPyBlcnJvckNhbGxiYWNrKGZyYW1lKSA6IHZvaWQgMCk7CgogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICBfcmVzdWx0cy5wdXNoKHR5cGVvZiBfdGhpcy5kZWJ1ZyA9PT0gImZ1bmN0aW9uIiA/IF90aGlzLmRlYnVnKCJVbmhhbmRsZWQgZnJhbWU6ICIgKyBmcmFtZSkgOiB2b2lkIDApOwoKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBfcmVzdWx0czsKICAgICAgICB9OwogICAgICB9KHRoaXMpOwoKICAgICAgdGhpcy53cy5vbmNsb3NlID0gZnVuY3Rpb24gKF90aGlzKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBtc2c7CiAgICAgICAgICBtc2cgPSAiV2hvb3BzISBMb3N0IGNvbm5lY3Rpb24gdG8gIiArIF90aGlzLndzLnVybDsKCiAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLmRlYnVnID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgIF90aGlzLmRlYnVnKG1zZyk7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXMuX2NsZWFuVXAoKTsKCiAgICAgICAgICByZXR1cm4gdHlwZW9mIGVycm9yQ2FsbGJhY2sgPT09ICJmdW5jdGlvbiIgPyBlcnJvckNhbGxiYWNrKG1zZykgOiB2b2lkIDA7CiAgICAgICAgfTsKICAgICAgfSh0aGlzKTsKCiAgICAgIHJldHVybiB0aGlzLndzLm9ub3BlbiA9IGZ1bmN0aW9uIChfdGhpcykgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLmRlYnVnID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgIF90aGlzLmRlYnVnKCdXZWIgU29ja2V0IE9wZW5lZC4uLicpOwogICAgICAgICAgfQoKICAgICAgICAgIGhlYWRlcnNbImFjY2VwdC12ZXJzaW9uIl0gPSBTdG9tcC5WRVJTSU9OUy5zdXBwb3J0ZWRWZXJzaW9ucygpOwogICAgICAgICAgaGVhZGVyc1siaGVhcnQtYmVhdCJdID0gW190aGlzLmhlYXJ0YmVhdC5vdXRnb2luZywgX3RoaXMuaGVhcnRiZWF0LmluY29taW5nXS5qb2luKCcsJyk7CiAgICAgICAgICByZXR1cm4gX3RoaXMuX3RyYW5zbWl0KCJDT05ORUNUIiwgaGVhZGVycyk7CiAgICAgICAgfTsKICAgICAgfSh0aGlzKTsKICAgIH07CgogICAgQ2xpZW50LnByb3RvdHlwZS5kaXNjb25uZWN0ID0gZnVuY3Rpb24gKGRpc2Nvbm5lY3RDYWxsYmFjaywgaGVhZGVycykgewogICAgICBpZiAoaGVhZGVycyA9PSBudWxsKSB7CiAgICAgICAgaGVhZGVycyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLl90cmFuc21pdCgiRElTQ09OTkVDVCIsIGhlYWRlcnMpOwoKICAgICAgdGhpcy53cy5vbmNsb3NlID0gbnVsbDsKICAgICAgdGhpcy53cy5jbG9zZSgpOwoKICAgICAgdGhpcy5fY2xlYW5VcCgpOwoKICAgICAgcmV0dXJuIHR5cGVvZiBkaXNjb25uZWN0Q2FsbGJhY2sgPT09ICJmdW5jdGlvbiIgPyBkaXNjb25uZWN0Q2FsbGJhY2soKSA6IHZvaWQgMDsKICAgIH07CgogICAgQ2xpZW50LnByb3RvdHlwZS5fY2xlYW5VcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTsKCiAgICAgIGlmICh0aGlzLnBpbmdlcikgewogICAgICAgIFN0b21wLmNsZWFySW50ZXJ2YWwodGhpcy5waW5nZXIpOwogICAgICB9CgogICAgICBpZiAodGhpcy5wb25nZXIpIHsKICAgICAgICByZXR1cm4gU3RvbXAuY2xlYXJJbnRlcnZhbCh0aGlzLnBvbmdlcik7CiAgICAgIH0KICAgIH07CgogICAgQ2xpZW50LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKGRlc3RpbmF0aW9uLCBoZWFkZXJzLCBib2R5KSB7CiAgICAgIGlmIChoZWFkZXJzID09IG51bGwpIHsKICAgICAgICBoZWFkZXJzID0ge307CiAgICAgIH0KCiAgICAgIGlmIChib2R5ID09IG51bGwpIHsKICAgICAgICBib2R5ID0gJyc7CiAgICAgIH0KCiAgICAgIGhlYWRlcnMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjsKICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zbWl0KCJTRU5EIiwgaGVhZGVycywgYm9keSk7CiAgICB9OwoKICAgIENsaWVudC5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKGRlc3RpbmF0aW9uLCBjYWxsYmFjaywgaGVhZGVycykgewogICAgICB2YXIgY2xpZW50OwoKICAgICAgaWYgKGhlYWRlcnMgPT0gbnVsbCkgewogICAgICAgIGhlYWRlcnMgPSB7fTsKICAgICAgfQoKICAgICAgaWYgKCFoZWFkZXJzLmlkKSB7CiAgICAgICAgaGVhZGVycy5pZCA9ICJzdWItIiArIHRoaXMuY291bnRlcisrOwogICAgICB9CgogICAgICBoZWFkZXJzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247CiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uc1toZWFkZXJzLmlkXSA9IGNhbGxiYWNrOwoKICAgICAgdGhpcy5fdHJhbnNtaXQoIlNVQlNDUklCRSIsIGhlYWRlcnMpOwoKICAgICAgY2xpZW50ID0gdGhpczsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogaGVhZGVycy5pZCwKICAgICAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7CiAgICAgICAgICByZXR1cm4gY2xpZW50LnVuc3Vic2NyaWJlKGhlYWRlcnMuaWQpOwogICAgICAgIH0KICAgICAgfTsKICAgIH07CgogICAgQ2xpZW50LnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uIChpZCkgewogICAgICBkZWxldGUgdGhpcy5zdWJzY3JpcHRpb25zW2lkXTsKICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zbWl0KCJVTlNVQlNDUklCRSIsIHsKICAgICAgICBpZDogaWQKICAgICAgfSk7CiAgICB9OwoKICAgIENsaWVudC5wcm90b3R5cGUuYmVnaW4gPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHsKICAgICAgdmFyIGNsaWVudCwgdHhpZDsKICAgICAgdHhpZCA9IHRyYW5zYWN0aW9uIHx8ICJ0eC0iICsgdGhpcy5jb3VudGVyKys7CgogICAgICB0aGlzLl90cmFuc21pdCgiQkVHSU4iLCB7CiAgICAgICAgdHJhbnNhY3Rpb246IHR4aWQKICAgICAgfSk7CgogICAgICBjbGllbnQgPSB0aGlzOwogICAgICByZXR1cm4gewogICAgICAgIGlkOiB0eGlkLAogICAgICAgIGNvbW1pdDogZnVuY3Rpb24gY29tbWl0KCkgewogICAgICAgICAgcmV0dXJuIGNsaWVudC5jb21taXQodHhpZCk7CiAgICAgICAgfSwKICAgICAgICBhYm9ydDogZnVuY3Rpb24gYWJvcnQoKSB7CiAgICAgICAgICByZXR1cm4gY2xpZW50LmFib3J0KHR4aWQpOwogICAgICAgIH0KICAgICAgfTsKICAgIH07CgogICAgQ2xpZW50LnByb3RvdHlwZS5jb21taXQgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHsKICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zbWl0KCJDT01NSVQiLCB7CiAgICAgICAgdHJhbnNhY3Rpb246IHRyYW5zYWN0aW9uCiAgICAgIH0pOwogICAgfTsKCiAgICBDbGllbnQucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7CiAgICAgIHJldHVybiB0aGlzLl90cmFuc21pdCgiQUJPUlQiLCB7CiAgICAgICAgdHJhbnNhY3Rpb246IHRyYW5zYWN0aW9uCiAgICAgIH0pOwogICAgfTsKCiAgICBDbGllbnQucHJvdG90eXBlLmFjayA9IGZ1bmN0aW9uIChtZXNzYWdlSUQsIHN1YnNjcmlwdGlvbiwgaGVhZGVycykgewogICAgICBpZiAoaGVhZGVycyA9PSBudWxsKSB7CiAgICAgICAgaGVhZGVycyA9IHt9OwogICAgICB9CgogICAgICBoZWFkZXJzWyJtZXNzYWdlLWlkIl0gPSBtZXNzYWdlSUQ7CiAgICAgIGhlYWRlcnMuc3Vic2NyaXB0aW9uID0gc3Vic2NyaXB0aW9uOwogICAgICByZXR1cm4gdGhpcy5fdHJhbnNtaXQoIkFDSyIsIGhlYWRlcnMpOwogICAgfTsKCiAgICBDbGllbnQucHJvdG90eXBlLm5hY2sgPSBmdW5jdGlvbiAobWVzc2FnZUlELCBzdWJzY3JpcHRpb24sIGhlYWRlcnMpIHsKICAgICAgaWYgKGhlYWRlcnMgPT0gbnVsbCkgewogICAgICAgIGhlYWRlcnMgPSB7fTsKICAgICAgfQoKICAgICAgaGVhZGVyc1sibWVzc2FnZS1pZCJdID0gbWVzc2FnZUlEOwogICAgICBoZWFkZXJzLnN1YnNjcmlwdGlvbiA9IHN1YnNjcmlwdGlvbjsKICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zbWl0KCJOQUNLIiwgaGVhZGVycyk7CiAgICB9OwoKICAgIHJldHVybiBDbGllbnQ7CiAgfSgpOwoKICBTdG9tcCA9IHsKICAgIFZFUlNJT05TOiB7CiAgICAgIFYxXzA6ICcxLjAnLAogICAgICBWMV8xOiAnMS4xJywKICAgICAgVjFfMjogJzEuMicsCiAgICAgIHN1cHBvcnRlZFZlcnNpb25zOiBmdW5jdGlvbiBzdXBwb3J0ZWRWZXJzaW9ucygpIHsKICAgICAgICByZXR1cm4gJzEuMSwxLjAnOwogICAgICB9CiAgICB9LAogICAgY2xpZW50OiBmdW5jdGlvbiBjbGllbnQodXJsLCBwcm90b2NvbHMpIHsKICAgICAgdmFyIGtsYXNzLCB3czsKCiAgICAgIGlmIChwcm90b2NvbHMgPT0gbnVsbCkgewogICAgICAgIHByb3RvY29scyA9IFsndjEwLnN0b21wJywgJ3YxMS5zdG9tcCddOwogICAgICB9CgogICAgICBrbGFzcyA9IFN0b21wLldlYlNvY2tldENsYXNzIHx8IFdlYlNvY2tldDsKICAgICAgd3MgPSBuZXcga2xhc3ModXJsLCBwcm90b2NvbHMpOwogICAgICByZXR1cm4gbmV3IENsaWVudCh3cyk7CiAgICB9LAogICAgb3ZlcjogZnVuY3Rpb24gb3Zlcih3cykgewogICAgICByZXR1cm4gbmV3IENsaWVudCh3cyk7CiAgICB9LAogICAgRnJhbWU6IEZyYW1lCiAgfTsKCiAgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAidW5kZWZpbmVkIiAmJiBleHBvcnRzICE9PSBudWxsKSB7CiAgICBleHBvcnRzLlN0b21wID0gU3RvbXA7CiAgfQoKICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgJiYgd2luZG93ICE9PSBudWxsKSB7CiAgICBTdG9tcC5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uIChpbnRlcnZhbCwgZikgewogICAgICByZXR1cm4gd2luZG93LnNldEludGVydmFsKGYsIGludGVydmFsKTsKICAgIH07CgogICAgU3RvbXAuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uIChpZCkgewogICAgICByZXR1cm4gd2luZG93LmNsZWFySW50ZXJ2YWwoaWQpOwogICAgfTsKCiAgICB3aW5kb3cuU3RvbXAgPSBTdG9tcDsKICB9IGVsc2UgaWYgKCFleHBvcnRzKSB7CiAgICBzZWxmLlN0b21wID0gU3RvbXA7CiAgfQp9KS5jYWxsKHRoaXMpOw=="},{"version":3,"sources":["D:/JayResp/vuevhr/src/utils/stomp.js"],"names":["Byte","Client","Frame","Stomp","__hasProp","hasOwnProperty","__slice","slice","LF","NULL","unmarshallSingle","command","headers","body","prototype","toString","lines","name","skipContentLength","value","_ref","call","push","sizeOfUTF8","join","s","encodeURI","match","length","data","chr","divider","headerLines","i","idx","len","line","start","trim","_i","_j","_len","_ref1","search","RegExp","substring","split","shift","str","replace","reverse","indexOf","parseInt","charAt","unmarshall","datas","frame","frames","last_frame","r","partial","_results","marshall","now","ws","binaryType","counter","connected","heartbeat","outgoing","incoming","maxWebSocketFrameSize","subscriptions","partialData","debug","message","window","console","log","Date","valueOf","_transmit","out","send","_setupHeartbeat","serverIncoming","serverOutgoing","ttl","v","version","VERSIONS","V1_1","V1_2","Math","max","pinger","setInterval","_this","ponger","delta","serverActivity","close","_parseConnect","args","connectCallback","errorCallback","arguments","Function","login","passcode","host","connect","apply","onmessage","evt","arr","c","client","messageID","onreceive","subscription","unmarshalledData","ArrayBuffer","Uint8Array","String","fromCharCode","server","ack","nack","onreceipt","onclose","msg","url","_cleanUp","onopen","supportedVersions","disconnect","disconnectCallback","clearInterval","destination","subscribe","callback","id","unsubscribe","begin","transaction","txid","commit","abort","V1_0","protocols","klass","WebSocketClass","WebSocket","over","exports","interval","f","self"],"mappings":"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","sourcesContent":["// Generated by CoffeeScript 1.7.1\r\n\r\n/*\r\n Stomp Over WebSocket http://www.jmesnil.net/stomp-websocket/doc/ | Apache License V2.0\r\n\r\n Copyright (C) 2010-2013 [Jeff Mesnil](http://jmesnil.net/)\r\n Copyright (C) 2012 [FuseSource, Inc.](http://fusesource.com)\r\n */\r\n\r\n(function() {\r\n    var Byte, Client, Frame, Stomp,\r\n        __hasProp = {}.hasOwnProperty,\r\n        __slice = [].slice;\r\n\r\n    Byte = {\r\n        LF: '\\x0A',\r\n        NULL: '\\x00'\r\n    };\r\n\r\n    Frame = (function() {\r\n        var unmarshallSingle;\r\n\r\n        function Frame(command, headers, body) {\r\n            this.command = command;\r\n            this.headers = headers != null ? headers : {};\r\n            this.body = body != null ? body : '';\r\n        }\r\n\r\n        Frame.prototype.toString = function() {\r\n            var lines, name, skipContentLength, value, _ref;\r\n            lines = [this.command];\r\n            skipContentLength = this.headers['content-length'] === false ? true : false;\r\n            if (skipContentLength) {\r\n                delete this.headers['content-length'];\r\n            }\r\n            _ref = this.headers;\r\n            for (name in _ref) {\r\n                if (!__hasProp.call(_ref, name)) continue;\r\n                value = _ref[name];\r\n                lines.push(\"\" + name + \":\" + value);\r\n            }\r\n            if (this.body && !skipContentLength) {\r\n                lines.push(\"content-length:\" + (Frame.sizeOfUTF8(this.body)));\r\n            }\r\n            lines.push(Byte.LF + this.body);\r\n            return lines.join(Byte.LF);\r\n        };\r\n\r\n        Frame.sizeOfUTF8 = function(s) {\r\n            if (s) {\r\n                return encodeURI(s).match(/%..|./g).length;\r\n            } else {\r\n                return 0;\r\n            }\r\n        };\r\n\r\n        unmarshallSingle = function(data) {\r\n            var body, chr, command, divider, headerLines, headers, i, idx, len, line, start, trim, _i, _j, _len, _ref, _ref1;\r\n            divider = data.search(RegExp(\"\" + Byte.LF + Byte.LF));\r\n            headerLines = data.substring(0, divider).split(Byte.LF);\r\n            command = headerLines.shift();\r\n            headers = {};\r\n            trim = function(str) {\r\n                return str.replace(/^\\s+|\\s+$/g, '');\r\n            };\r\n            _ref = headerLines.reverse();\r\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n                line = _ref[_i];\r\n                idx = line.indexOf(':');\r\n                headers[trim(line.substring(0, idx))] = trim(line.substring(idx + 1));\r\n            }\r\n            body = '';\r\n            start = divider + 2;\r\n            if (headers['content-length']) {\r\n                len = parseInt(headers['content-length']);\r\n                body = ('' + data).substring(start, start + len);\r\n            } else {\r\n                chr = null;\r\n                for (i = _j = start, _ref1 = data.length; start <= _ref1 ? _j < _ref1 : _j > _ref1; i = start <= _ref1 ? ++_j : --_j) {\r\n                    chr = data.charAt(i);\r\n                    if (chr === Byte.NULL) {\r\n                        break;\r\n                    }\r\n                    body += chr;\r\n                }\r\n            }\r\n            return new Frame(command, headers, body);\r\n        };\r\n\r\n        Frame.unmarshall = function(datas) {\r\n            var frame, frames, last_frame, r;\r\n            frames = datas.split(RegExp(\"\" + Byte.NULL + Byte.LF + \"*\"));\r\n            r = {\r\n                frames: [],\r\n                partial: ''\r\n            };\r\n            r.frames = (function() {\r\n                var _i, _len, _ref, _results;\r\n                _ref = frames.slice(0, -1);\r\n                _results = [];\r\n                for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n                    frame = _ref[_i];\r\n                    _results.push(unmarshallSingle(frame));\r\n                }\r\n                return _results;\r\n            })();\r\n            last_frame = frames.slice(-1)[0];\r\n            if (last_frame === Byte.LF || (last_frame.search(RegExp(\"\" + Byte.NULL + Byte.LF + \"*$\"))) !== -1) {\r\n                r.frames.push(unmarshallSingle(last_frame));\r\n            } else {\r\n                r.partial = last_frame;\r\n            }\r\n            return r;\r\n        };\r\n\r\n        Frame.marshall = function(command, headers, body) {\r\n            var frame;\r\n            frame = new Frame(command, headers, body);\r\n            return frame.toString() + Byte.NULL;\r\n        };\r\n\r\n        return Frame;\r\n\r\n    })();\r\n\r\n    Client = (function() {\r\n        var now;\r\n\r\n        function Client(ws) {\r\n            this.ws = ws;\r\n            this.ws.binaryType = \"arraybuffer\";\r\n            this.counter = 0;\r\n            this.connected = false;\r\n            this.heartbeat = {\r\n                outgoing: 10000,\r\n                incoming: 10000\r\n            };\r\n            this.maxWebSocketFrameSize = 16 * 1024;\r\n            this.subscriptions = {};\r\n            this.partialData = '';\r\n        }\r\n\r\n        Client.prototype.debug = function(message) {\r\n            var _ref;\r\n            return typeof window !== \"undefined\" && window !== null ? (_ref = window.console) != null ? _ref.log(message) : void 0 : void 0;\r\n        };\r\n\r\n        now = function() {\r\n            if (Date.now) {\r\n                return Date.now();\r\n            } else {\r\n                return new Date().valueOf;\r\n            }\r\n        };\r\n\r\n        Client.prototype._transmit = function(command, headers, body) {\r\n            var out;\r\n            out = Frame.marshall(command, headers, body);\r\n            if (typeof this.debug === \"function\") {\r\n                this.debug(\">>> \" + out);\r\n            }\r\n            while (true) {\r\n                if (out.length > this.maxWebSocketFrameSize) {\r\n                    this.ws.send(out.substring(0, this.maxWebSocketFrameSize));\r\n                    out = out.substring(this.maxWebSocketFrameSize);\r\n                    if (typeof this.debug === \"function\") {\r\n                        this.debug(\"remaining = \" + out.length);\r\n                    }\r\n                } else {\r\n                    return this.ws.send(out);\r\n                }\r\n            }\r\n        };\r\n\r\n        Client.prototype._setupHeartbeat = function(headers) {\r\n            var serverIncoming, serverOutgoing, ttl, v, _ref, _ref1;\r\n            if ((_ref = headers.version) !== Stomp.VERSIONS.V1_1 && _ref !== Stomp.VERSIONS.V1_2) {\r\n                return;\r\n            }\r\n            _ref1 = (function() {\r\n                var _i, _len, _ref1, _results;\r\n                _ref1 = headers['heart-beat'].split(\",\");\r\n                _results = [];\r\n                for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\r\n                    v = _ref1[_i];\r\n                    _results.push(parseInt(v));\r\n                }\r\n                return _results;\r\n            })(), serverOutgoing = _ref1[0], serverIncoming = _ref1[1];\r\n            if (!(this.heartbeat.outgoing === 0 || serverIncoming === 0)) {\r\n                ttl = Math.max(this.heartbeat.outgoing, serverIncoming);\r\n                if (typeof this.debug === \"function\") {\r\n                    this.debug(\"send PING every \" + ttl + \"ms\");\r\n                }\r\n                this.pinger = Stomp.setInterval(ttl, (function(_this) {\r\n                    return function() {\r\n                        _this.ws.send(Byte.LF);\r\n                        return typeof _this.debug === \"function\" ? _this.debug(\">>> PING\") : void 0;\r\n                    };\r\n                })(this));\r\n            }\r\n            if (!(this.heartbeat.incoming === 0 || serverOutgoing === 0)) {\r\n                ttl = Math.max(this.heartbeat.incoming, serverOutgoing);\r\n                if (typeof this.debug === \"function\") {\r\n                    this.debug(\"check PONG every \" + ttl + \"ms\");\r\n                }\r\n                return this.ponger = Stomp.setInterval(ttl, (function(_this) {\r\n                    return function() {\r\n                        var delta;\r\n                        delta = now() - _this.serverActivity;\r\n                        if (delta > ttl * 2) {\r\n                            if (typeof _this.debug === \"function\") {\r\n                                _this.debug(\"did not receive server activity for the last \" + delta + \"ms\");\r\n                            }\r\n                            return _this.ws.close();\r\n                        }\r\n                    };\r\n                })(this));\r\n            }\r\n        };\r\n\r\n        Client.prototype._parseConnect = function() {\r\n            var args, connectCallback, errorCallback, headers;\r\n            args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\r\n            headers = {};\r\n            switch (args.length) {\r\n                case 2:\r\n                    headers = args[0], connectCallback = args[1];\r\n                    break;\r\n                case 3:\r\n                    if (args[1] instanceof Function) {\r\n                        headers = args[0], connectCallback = args[1], errorCallback = args[2];\r\n                    } else {\r\n                        headers.login = args[0], headers.passcode = args[1], connectCallback = args[2];\r\n                    }\r\n                    break;\r\n                case 4:\r\n                    headers.login = args[0], headers.passcode = args[1], connectCallback = args[2], errorCallback = args[3];\r\n                    break;\r\n                default:\r\n                    headers.login = args[0], headers.passcode = args[1], connectCallback = args[2], errorCallback = args[3], headers.host = args[4];\r\n            }\r\n            return [headers, connectCallback, errorCallback];\r\n        };\r\n\r\n        Client.prototype.connect = function() {\r\n            var args, errorCallback, headers, out;\r\n            args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\r\n            out = this._parseConnect.apply(this, args);\r\n            headers = out[0], this.connectCallback = out[1], errorCallback = out[2];\r\n            if (typeof this.debug === \"function\") {\r\n                this.debug(\"Opening Web Socket...\");\r\n            }\r\n            this.ws.onmessage = (function(_this) {\r\n                return function(evt) {\r\n                    var arr, c, client, data, frame, messageID, onreceive, subscription, unmarshalledData, _i, _len, _ref, _results;\r\n                    data = typeof ArrayBuffer !== 'undefined' && evt.data instanceof ArrayBuffer ? (arr = new Uint8Array(evt.data), typeof _this.debug === \"function\" ? _this.debug(\"--- got data length: \" + arr.length) : void 0, ((function() {\r\n                        var _i, _len, _results;\r\n                        _results = [];\r\n                        for (_i = 0, _len = arr.length; _i < _len; _i++) {\r\n                            c = arr[_i];\r\n                            _results.push(String.fromCharCode(c));\r\n                        }\r\n                        return _results;\r\n                    })()).join('')) : evt.data;\r\n                    _this.serverActivity = now();\r\n                    if (data === Byte.LF) {\r\n                        if (typeof _this.debug === \"function\") {\r\n                            _this.debug(\"<<< PONG\");\r\n                        }\r\n                        return;\r\n                    }\r\n                    if (typeof _this.debug === \"function\") {\r\n                        _this.debug(\"<<< \" + data);\r\n                    }\r\n                    unmarshalledData = Frame.unmarshall(_this.partialData + data);\r\n                    _this.partialData = unmarshalledData.partial;\r\n                    _ref = unmarshalledData.frames;\r\n                    _results = [];\r\n                    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n                        frame = _ref[_i];\r\n                        switch (frame.command) {\r\n                            case \"CONNECTED\":\r\n                                if (typeof _this.debug === \"function\") {\r\n                                    _this.debug(\"connected to server \" + frame.headers.server);\r\n                                }\r\n                                _this.connected = true;\r\n                                _this._setupHeartbeat(frame.headers);\r\n                                _results.push(typeof _this.connectCallback === \"function\" ? _this.connectCallback(frame) : void 0);\r\n                                break;\r\n                            case \"MESSAGE\":\r\n                                subscription = frame.headers.subscription;\r\n                                onreceive = _this.subscriptions[subscription] || _this.onreceive;\r\n                                if (onreceive) {\r\n                                    client = _this;\r\n                                    messageID = frame.headers[\"message-id\"];\r\n                                    frame.ack = function(headers) {\r\n                                        if (headers == null) {\r\n                                            headers = {};\r\n                                        }\r\n                                        return client.ack(messageID, subscription, headers);\r\n                                    };\r\n                                    frame.nack = function(headers) {\r\n                                        if (headers == null) {\r\n                                            headers = {};\r\n                                        }\r\n                                        return client.nack(messageID, subscription, headers);\r\n                                    };\r\n                                    _results.push(onreceive(frame));\r\n                                } else {\r\n                                    _results.push(typeof _this.debug === \"function\" ? _this.debug(\"Unhandled received MESSAGE: \" + frame) : void 0);\r\n                                }\r\n                                break;\r\n                            case \"RECEIPT\":\r\n                                _results.push(typeof _this.onreceipt === \"function\" ? _this.onreceipt(frame) : void 0);\r\n                                break;\r\n                            case \"ERROR\":\r\n                                _results.push(typeof errorCallback === \"function\" ? errorCallback(frame) : void 0);\r\n                                break;\r\n                            default:\r\n                                _results.push(typeof _this.debug === \"function\" ? _this.debug(\"Unhandled frame: \" + frame) : void 0);\r\n                        }\r\n                    }\r\n                    return _results;\r\n                };\r\n            })(this);\r\n            this.ws.onclose = (function(_this) {\r\n                return function() {\r\n                    var msg;\r\n                    msg = \"Whoops! Lost connection to \" + _this.ws.url;\r\n                    if (typeof _this.debug === \"function\") {\r\n                        _this.debug(msg);\r\n                    }\r\n                    _this._cleanUp();\r\n                    return typeof errorCallback === \"function\" ? errorCallback(msg) : void 0;\r\n                };\r\n            })(this);\r\n            return this.ws.onopen = (function(_this) {\r\n                return function() {\r\n                    if (typeof _this.debug === \"function\") {\r\n                        _this.debug('Web Socket Opened...');\r\n                    }\r\n                    headers[\"accept-version\"] = Stomp.VERSIONS.supportedVersions();\r\n                    headers[\"heart-beat\"] = [_this.heartbeat.outgoing, _this.heartbeat.incoming].join(',');\r\n                    return _this._transmit(\"CONNECT\", headers);\r\n                };\r\n            })(this);\r\n        };\r\n\r\n        Client.prototype.disconnect = function(disconnectCallback, headers) {\r\n            if (headers == null) {\r\n                headers = {};\r\n            }\r\n            this._transmit(\"DISCONNECT\", headers);\r\n            this.ws.onclose = null;\r\n            this.ws.close();\r\n            this._cleanUp();\r\n            return typeof disconnectCallback === \"function\" ? disconnectCallback() : void 0;\r\n        };\r\n\r\n        Client.prototype._cleanUp = function() {\r\n            this.connected = false;\r\n            if (this.pinger) {\r\n                Stomp.clearInterval(this.pinger);\r\n            }\r\n            if (this.ponger) {\r\n                return Stomp.clearInterval(this.ponger);\r\n            }\r\n        };\r\n\r\n        Client.prototype.send = function(destination, headers, body) {\r\n            if (headers == null) {\r\n                headers = {};\r\n            }\r\n            if (body == null) {\r\n                body = '';\r\n            }\r\n            headers.destination = destination;\r\n            return this._transmit(\"SEND\", headers, body);\r\n        };\r\n\r\n        Client.prototype.subscribe = function(destination, callback, headers) {\r\n            var client;\r\n            if (headers == null) {\r\n                headers = {};\r\n            }\r\n            if (!headers.id) {\r\n                headers.id = \"sub-\" + this.counter++;\r\n            }\r\n            headers.destination = destination;\r\n            this.subscriptions[headers.id] = callback;\r\n            this._transmit(\"SUBSCRIBE\", headers);\r\n            client = this;\r\n            return {\r\n                id: headers.id,\r\n                unsubscribe: function() {\r\n                    return client.unsubscribe(headers.id);\r\n                }\r\n            };\r\n        };\r\n\r\n        Client.prototype.unsubscribe = function(id) {\r\n            delete this.subscriptions[id];\r\n            return this._transmit(\"UNSUBSCRIBE\", {\r\n                id: id\r\n            });\r\n        };\r\n\r\n        Client.prototype.begin = function(transaction) {\r\n            var client, txid;\r\n            txid = transaction || \"tx-\" + this.counter++;\r\n            this._transmit(\"BEGIN\", {\r\n                transaction: txid\r\n            });\r\n            client = this;\r\n            return {\r\n                id: txid,\r\n                commit: function() {\r\n                    return client.commit(txid);\r\n                },\r\n                abort: function() {\r\n                    return client.abort(txid);\r\n                }\r\n            };\r\n        };\r\n\r\n        Client.prototype.commit = function(transaction) {\r\n            return this._transmit(\"COMMIT\", {\r\n                transaction: transaction\r\n            });\r\n        };\r\n\r\n        Client.prototype.abort = function(transaction) {\r\n            return this._transmit(\"ABORT\", {\r\n                transaction: transaction\r\n            });\r\n        };\r\n\r\n        Client.prototype.ack = function(messageID, subscription, headers) {\r\n            if (headers == null) {\r\n                headers = {};\r\n            }\r\n            headers[\"message-id\"] = messageID;\r\n            headers.subscription = subscription;\r\n            return this._transmit(\"ACK\", headers);\r\n        };\r\n\r\n        Client.prototype.nack = function(messageID, subscription, headers) {\r\n            if (headers == null) {\r\n                headers = {};\r\n            }\r\n            headers[\"message-id\"] = messageID;\r\n            headers.subscription = subscription;\r\n            return this._transmit(\"NACK\", headers);\r\n        };\r\n\r\n        return Client;\r\n\r\n    })();\r\n\r\n    Stomp = {\r\n        VERSIONS: {\r\n            V1_0: '1.0',\r\n            V1_1: '1.1',\r\n            V1_2: '1.2',\r\n            supportedVersions: function() {\r\n                return '1.1,1.0';\r\n            }\r\n        },\r\n        client: function(url, protocols) {\r\n            var klass, ws;\r\n            if (protocols == null) {\r\n                protocols = ['v10.stomp', 'v11.stomp'];\r\n            }\r\n            klass = Stomp.WebSocketClass || WebSocket;\r\n            ws = new klass(url, protocols);\r\n            return new Client(ws);\r\n        },\r\n        over: function(ws) {\r\n            return new Client(ws);\r\n        },\r\n        Frame: Frame\r\n    };\r\n\r\n    if (typeof exports !== \"undefined\" && exports !== null) {\r\n        exports.Stomp = Stomp;\r\n    }\r\n\r\n    if (typeof window !== \"undefined\" && window !== null) {\r\n        Stomp.setInterval = function(interval, f) {\r\n            return window.setInterval(f, interval);\r\n        };\r\n        Stomp.clearInterval = function(id) {\r\n            return window.clearInterval(id);\r\n        };\r\n        window.Stomp = Stomp;\r\n    } else if (!exports) {\r\n        self.Stomp = Stomp;\r\n    }\r\n\r\n}).call(this);\r\n"]}]}