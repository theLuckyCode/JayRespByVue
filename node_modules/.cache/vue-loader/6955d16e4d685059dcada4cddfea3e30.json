{"remainingRequest":"D:\\JayResp\\vuevhr\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JayResp\\vuevhr\\src\\components\\sys\\basic\\DepMana.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JayResp\\vuevhr\\src\\components\\sys\\basic\\DepMana.vue","mtime":1582276806157},{"path":"D:\\JayResp\\vuevhr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JayResp\\vuevhr\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\JayResp\\vuevhr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JayResp\\vuevhr\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJEZXBNYW5hIiwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBmaWx0ZXJUZXh0OicnLAogICAgICAgICAgICBkZXBzOltdLAogICAgICAgICAgICBkZWZhdWx0UHJvcHM6IHsKICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nLAogICAgICAgICAgICAgICAgbGFiZWw6ICduYW1lJwogICAgICAgICAgICB9LAogICAgICAgICAgICBkaWFsb2dWaXNpYmxlOmZhbHNlLAogICAgICAgICAgICBkZXA6ewogICAgICAgICAgICAgICAgbmFtZTonJywKICAgICAgICAgICAgICAgIHBhcmVudElkOi0xCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHBuYW1lOicnICAvL+eItumhueeahOWQjeWtlwogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgdGhpcy5pbml0RGVwcygpOwogICAgfSwKICAgIHdhdGNoOnsgLy93YXRjaOaYr+ebkeaOp+WZqAogICAgICAgIGZpbHRlclRleHQodmFsKSB7CiAgICAgICAgLy/or6Xmlrnms5XmhI/mgJ3lsLHmmK/mkJzntKLmoYbkuK3mnInlgLzlj5jljJbml7bvvIzlsLHkvJrop6blj5Hov5nkuKrmlrnms5XvvIx2YWzlsLHmmK/mkJzntKLmoYbph4zpnaLnmoTmnIDmlrDlgLwKICAgICAgICAvL+e7k+WQiOS4gOi1t+eci+eahOaEj+aAneWwseaYr+ebkeaOp+aQnOe0ouahhumHjOmdouacieayoeacieWAvOWPkeeUn+WPmOWMlu+8jOacieeahOivneWwseinpuWPkeivpeaWueazlQogICAgICAgICAgICB0aGlzLiRyZWZzLnRyZWUuZmlsdGVyKHZhbCk7CiAgICAgICAgLy/ov5nph4znmoRmaWx0ZXLmjIfnmoTlsLHmmK86ZmlsdGVyLW5vZGUtbWV0aG9kPSJmaWx0ZXJOb2RlIui/meS4quaWueazle+8jOS8oOeahOWPguaVsOaYr3ZhbAogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICBkb0FkZERlcCgpewogICAgICAgICAgICB0aGlzLnBvc3RSZXF1ZXN0KCIvc3lzdGVtL2Jhc2ljL2RlcGFydG1lbnQvIix0aGlzLmRlcCkudGhlbihyZXNwPT57CiAgICAgICAgICAgICAgICBpZiAocmVzcCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXA9ewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOicnLAogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJZDotMQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbmFtZT0nJyA7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0RGVwcygpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZT1mYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHNob3dBZGREZXAoZGF0YSl7CiAgICAgICAgICAvLyBhbGVydChKU09OLnN0cmluZ2lmeShkYXRhKSk7CiAgICAgICAgICB0aGlzLnBuYW1lID0gZGF0YS5uYW1lOwogICAgICAgICAgdGhpcy5kZXAucGFyZW50SWQgPSBkYXRhLmlkOwogICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlPXRydWU7CiAgICAgICAgfSwKICAgICAgICBkZWxldGVEZXAoZGF0YSl7CiAgICAgICAgICAgIC8vYWxlcnQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwogICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk44CQJytkYXRhLm5hbWUrJ+OAkeinkuiJsiwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVSZXF1ZXN0KCIvc3lzdGVtL2Jhc2ljL2RlcGFydG1lbnQvIitkYXRhLmlkKS50aGVuKHJlc3A9PnsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3ApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0RGVwcygpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBpbml0RGVwcygpewogICAgICAgICB0aGlzLmdldFJlcXVlc3QoIi9zeXN0ZW0vYmFzaWMvZGVwYXJ0bWVudC8iKS50aGVuKHJlc3A9PnsKICAgICAgICAgICAgIGlmIChyZXNwKXsKICAgICAgICAgICAgICAgICB0aGlzLmRlcHMgPSByZXNwIDsKICAgICAgICAgICAgIH0KICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGZpbHRlck5vZGUodmFsdWUsIGRhdGEpIHsKICAgICAgICAgICAgLy92YWx1ZeWwseaYr+S4iuaWh+aJgOivtOeahOS8oOi/h+adpeeahHZhbO+8jOmCo+S5iGRhdGHlsLHmmK/ku5bnmoTlrZDpobkKICAgICAgICAgICAgLy/ku6Xov5nph4zkuLrkvovvvIzoi6V2YWx1ZeaYr+iCoeS4nOS8mu+8jOmCo+S5iGRhdGHlsLHmmK/okaPkuovkvJrvvIxiYmLvvJvoi6V2YWx1ZeaYr+iRo+S6i+S8mu+8jOmCo+S5iGRhdGHlsLHmmK/mgLvlip4KICAgICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIC8v5b2TdmFsdWXkuLrnqbrnmoTml7blgJnvvIzov5Tlm550cnVl77yb5b2T6L+U5ZuedHJ1ZeaXtu+8jOmCo+S5iGRhdGHlsLHnlZnnnYDvvIzlkKbliJnljrvpmaRkYXRhCiAgICAgICAgICAgIHJldHVybiBkYXRhLm5hbWUuaW5kZXhPZih2YWx1ZSkgIT09IC0xOyAvL+i/memHjOeahG5hbWXlsLHmmK/kuIrmlofkuK1kZWZhdWx0UHJvcHPkuK3nmoRsYWJlbAogICAgICAgICAgICAvL2luZGV4T2YodmFsdWUp6KGo56S65piv5ZCm5YyF5ZCrdmFsdWXvvJtkYXRhLm5hbWUuaW5kZXhPZih2YWx1ZSkgIT09IC0x5oSP5oCd5bCx5pivZGF0YeWMheWQq+S6hnZhbHVl5YC877yM6L+U5ZuedHJ1ZQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["DepMana.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DepMana.vue","sourceRoot":"src/components/sys/basic","sourcesContent":["<template>\r\n    <div style=\"width: 500px\">\r\n        <el-input\r\n                placeholder=\"请输入部门名称进行搜索...\"\r\n                v-model=\"filterText\"\r\n                prefix-icon=\"el-icon-search\">\r\n        </el-input>\r\n\r\n        <el-tree\r\n                :data=\"deps\"\r\n                :props=\"defaultProps\"\r\n                :filter-node-method=\"filterNode\"\r\n                :expand-on-click-node=\"false\"\r\n                ref=\"tree\">\r\n           <span class=\"custom-tree-node\" slot-scope=\"{ node, data }\"\r\n                 style=\"display: flex;justify-content: space-between;width:100%\">\r\n                  <!--node值的是当前元素，data就是该元素的数据-->\r\n        <span>{{ node.label }}</span>  <!--{{ node.label }}与{{data.name}}是一样的-->\r\n        <span>\r\n          <el-button\r\n                  type=\"primary\"\r\n                  size=\"mini\"\r\n                  style=\"padding: 2px\"\r\n                  @click=\"() => showAddDep(data)\">\r\n            添加部门\r\n          </el-button>\r\n          <el-button\r\n                  type=\"danger\"\r\n                  size=\"mini\"\r\n                  style=\"padding: 2px\"\r\n                  @click=\"() => deleteDep(data)\">\r\n            删除部门\r\n          </el-button>\r\n        </span>\r\n      </span>\r\n        </el-tree>\r\n        <!--   增加部门时候的弹框     -->\r\n        <el-dialog\r\n                title=\"添加部门\"\r\n                :visible.sync=\"dialogVisible\"\r\n                width=\"30%\"\r\n                :before-close=\"handleClose\">\r\n            <div>\r\n                <table>\r\n                    <tr>\r\n                        <td><el-tag>上级部门</el-tag></td>\r\n                        <td><span>{{pname}}</span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td><el-tag>部门名称</el-tag></td>\r\n                        <td><el-input v-model=\"dep.name\" placeholder=\"请输入部门名称...\" ></el-input></td>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n    <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n    <el-button type=\"primary\" @click=\"doAddDep\">确 定</el-button>\r\n  </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"DepMana\",\r\n        data(){\r\n            return {\r\n                filterText:'',\r\n                deps:[],\r\n                defaultProps: {\r\n                    children: 'children',\r\n                    label: 'name'\r\n                },\r\n                dialogVisible:false,\r\n                dep:{\r\n                    name:'',\r\n                    parentId:-1\r\n                },\r\n                pname:''  //父项的名字\r\n            }\r\n        },\r\n        mounted() {\r\n           this.initDeps();\r\n        },\r\n        watch:{ //watch是监控器\r\n            filterText(val) {\r\n            //该方法意思就是搜索框中有值变化时，就会触发这个方法，val就是搜索框里面的最新值\r\n            //结合一起看的意思就是监控搜索框里面有没有值发生变化，有的话就触发该方法\r\n                this.$refs.tree.filter(val);\r\n            //这里的filter指的就是:filter-node-method=\"filterNode\"这个方法，传的参数是val\r\n            }\r\n        },\r\n        methods:{\r\n            doAddDep(){\r\n                this.postRequest(\"/system/basic/department/\",this.dep).then(resp=>{\r\n                    if (resp){\r\n                        this.dep={\r\n                            name:'',\r\n                            parentId:-1\r\n                        };\r\n                        this.pname='' ;\r\n                        this.initDeps();\r\n                        this.dialogVisible=false;\r\n                    }\r\n                })\r\n            },\r\n            showAddDep(data){\r\n              // alert(JSON.stringify(data));\r\n              this.pname = data.name;\r\n              this.dep.parentId = data.id;\r\n              this.dialogVisible=true;\r\n            },\r\n            deleteDep(data){\r\n                //alert(JSON.stringify(data));\r\n                    this.$confirm('此操作将永久删除【'+data.name+'】角色, 是否继续?', '提示', {\r\n                        confirmButtonText: '确定',\r\n                        cancelButtonText: '取消',\r\n                        type: 'warning'\r\n                    }).then(() => {\r\n                        this.deleteRequest(\"/system/basic/department/\"+data.id).then(resp=>{\r\n                            if (resp){\r\n                                this.initDeps();\r\n                            }\r\n                        })\r\n                    }).catch(() => {\r\n                        this.$message({\r\n                            type: 'info',\r\n                            message: '已取消删除'\r\n                        });\r\n                    });\r\n            },\r\n            initDeps(){\r\n             this.getRequest(\"/system/basic/department/\").then(resp=>{\r\n                 if (resp){\r\n                     this.deps = resp ;\r\n                 }\r\n             })\r\n            },\r\n            filterNode(value, data) {\r\n                //value就是上文所说的传过来的val，那么data就是他的子项\r\n                //以这里为例，若value是股东会，那么data就是董事会，bbb；若value是董事会，那么data就是总办\r\n                if (!value) return true;\r\n                //当value为空的时候，返回true；当返回true时，那么data就留着，否则去除data\r\n                return data.name.indexOf(value) !== -1; //这里的name就是上文中defaultProps中的label\r\n                //indexOf(value)表示是否包含value；data.name.indexOf(value) !== -1意思就是data包含了value值，返回true\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]}]}